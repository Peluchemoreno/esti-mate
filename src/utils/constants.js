export const starterItems = [
  {
    name: '5" K-Style',
    visual: "#000000",
    price: "$8.00",
    quantity: "length-feet",
    listed: true,
  },
  {
    name: '5" K-Style Miter',
    visual: '#000000',
    price: '$10.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: '6" K-Style Miter',
    visual: '#000000',
    price: '$10.00',
    quantity: 'unit-per',
    listed: false,
  },

  {
    name: '6" K-Style',
    visual: "#234a38",
    price: "$10.00",
    quantity: "length-feet",
    listed: true,
  },
  {
    name: '5" Straight Face Miter',
    visual: '#000000',
    price: '$10.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: '5" Straight Face',
    visual: "#234a38",
    price: "$10.00",
    quantity: "length-feet",
    listed: true,
  },
  {
    name: '6" Straight Face',
    visual: '#53f1ac',
    price: '$11.00',
    quantity: 'length-feet',
    listed: true,
  },
  {
    name: '6" Straight Face Miter',
    visual: '#000000',
    price: '$10.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: '5" Box Gutter',
    visual: "#32ff1b",
    price: '$14.00',
    quantity: 'length-feet',
    listed: true,
  },
  {
    name: '5" Box Miter',
    visual: '#000000',
    price: '$4.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: '6" Box Gutter',
    visual: '#9f3fa5',
    price: '$11.00',
    quantity: 'length-feet',
    listed: true,
  },
  {
    name: '6" Box Miter',
    visual: '#000000',
    price: '$10.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: 'Custom Gutter',
    visual: '#3b1afc',
    price: '$15.00',
    quantity: 'length-feet',
    listed: true,
  },
  {
    name: 'Custom Miter',
    visual: '#000000',
    price: '$20.00',
    quantity: 'unit-per',
    listed: false,
  },
  {
    name: "2x3 Downspout",
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: "2x3 A Elbow",
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: "2x3 B Elbow",
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '2x3 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '2x3 4" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '2x3 6" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: "3x4 Downspout",
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: "3x4 A Elbow",
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: "3x4 B Elbow",
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3x4 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3x4 4" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3x4 6" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: "4x5 downspout",
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: "4x5 A Elbow",
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: "4x5 B Elbow",
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4x5 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4x5 4" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4x5 6" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3" Round Downspout',
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: '3" Round A Elbow',
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3" Round B Elbow',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3" Round 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `3" Round 4" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `3" Round 6" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4" Round Downspout',
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: '4" Round A Elbow',
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4" Round 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '4" Round B Elbow',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `4" Round 4" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `4" Round 6" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: 'Box Downspout',
    visual: "#000000",
    price: "$4.00",
    quantity: "length-feet",
    listed: false,
  },
  {
    name: 'Box A Elbow',
    visual: "#234a38",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: 'Box B Elbow',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: '3" Round 2" Offset',
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `3" Round 4" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `3" Round 6" Offset`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },
  {
    name: `Splash Block`,
    visual: "#000000",
    price: "$5.00",
    quantity: "unit-per",
    listed: false,
  },


];
// when testing the app on the network and not on local host run the second baseUrl
// export const BASE_URL = "http://127.0.0.1:4000/";
export const BASE_URL = "http://192.168.1.14:4000/";

export function processServerResponse(res) {
  if (res.ok) {
    return res.json();
  } else {
    return Promise.reject((error) => {
      console.error(error);
    });
  }
}

/* ------------------------------------------------------------------------------------ */
/*                                    grid utility functions                                    */
/* ------------------------------------------------------------------------------------ */

const topHorizontalLineCoords = { x1: 0, y1: 0, x2: 500, y2: 0 };
const leftVerticalLineCoords = { x1: 0, y1: 0, x2: 0, y2: 500 };

// coordinates of the start point of line 1 (x1_1, y1_1)
// coordinates of the end point of line 1 (x1_2, y1_2)

// coordinates of the start point of line 2 (x2_1, y2_1)
// coordinates of the end point of line 2 (x2_2, y2_2)

export function areLinesParallel(
  [x1_1, y1_1],
  [x1_2, y1_2],
  [x2_1, y2_1],
  [x2_2, y2_2]
) {
  if (isLineVertical(x1_1, x1_2) && isLineVertical(x2_1, x2_2)) {
    return true;
  }

  if (isLineHorizontal(y1_1, y1_2) && isLineHorizontal(y2_1, y2_2)) {
    return true;
  }

  const slope1 = (y1_2 - y1_1) / (x1_2 - x1_1);
  const slope2 = (y2_2 - y2_1) / (x2_2 - x2_1);
  return slope1 === slope2;
}

export function isLineParallelToTop(x1, y1, x2, y2) {
  const answer = areLinesParallel(
    [topHorizontalLineCoords.x1, topHorizontalLineCoords.y1],
    [topHorizontalLineCoords.x2, topHorizontalLineCoords.y2],
    [x1, y1],
    [x2, y2]
  );
  return answer;
}

export function isLineParallelToSide(x1, y1, x2, y2) {
  const answer = areLinesParallel(
    [leftVerticalLineCoords.x1, leftVerticalLineCoords.y1],
    [leftVerticalLineCoords.x2, leftVerticalLineCoords.y2],
    [x1, y1],
    [x2, y2]
  );
  return answer;
}

export function calculateDistance([x1, y1], [x2, y2]) {
  const solution = Math.round(Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2));
  return solution;
}

function isLineHorizontal(y1, y2) {
  return y1 === y2;
}

function isLineVertical(x1, x2) {
  return x1 === x2;
}

export function isLineNearPoint(x1, y1, x2, y2, px, py, radius) {
  function distance(x1, y1, x2, y2) {
    return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
  }

  // console.log("Checking line from:", x1, y1, "to", x2, y2);
  // console.log("Click at:", px, py, "with radius:", radius);

  // Find the projection of (px, py) onto the line segment
  let A = px - x1;
  let B = py - y1;
  let C = x2 - x1;
  let D = y2 - y1;

  let dot = A * C + B * D;
  let lenSq = C * C + D * D;
  let param = lenSq !== 0 ? dot / lenSq : -1; // Avoid division by zero

  let closestX, closestY;

  if (param < 0) {
    closestX = x1;
    closestY = y1;
  } else if (param > 1) {
    closestX = x2;
    closestY = y2;
  } else {
    closestX = x1 + param * C;
    closestY = y1 + param * D;
  }

  let dist = distance(px, py, closestX, closestY);
  // console.log("Closest point on line:", closestX, closestY);
  // console.log("Distance from click to line:", dist);

  return dist <= radius;
}

// function isLineNearPoint(x1, y1, x2, y2, px, py, radius) {
//   function distance(x1, y1, x2, y2) {
//     return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
//   }

//   // Find the projection of (px, py) onto the line segment
//   let A = px - x1;
//   let B = py - y1;
//   let C = x2 - x1;
//   let D = y2 - y1;

//   let dot = A * C + B * D;
//   let lenSq = C * C + D * D;
//   let param = lenSq !== 0 ? dot / lenSq : -1; // Avoid division by zero

//   let closestX, closestY;

//   if (param < 0) {
//     closestX = x1;
//     closestY = y1;
//   } else if (param > 1) {
//     closestX = x2;
//     closestY = y2;
//   } else {
//     closestX = x1 + param * C;
//     closestY = y1 + param * D;
//   }

//   // Check if the closest point on the line is within the given radius
//   return distance(px, py, closestX, closestY) <= radius;
// }
